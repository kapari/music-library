(this["webpackJsonpmusic-library"]=this["webpackJsonpmusic-library"]||[]).push([[0],{36:function(n,e,t){},45:function(n,e,t){"use strict";t.r(e);var r=t(1),o=t(0),a=t.n(o),i=t(12),c=t.n(i),d=(t(36),t(3)),s=t(7),l=t(4),u=t(23),b=t(24),j=t(28),f=t(26),h=function(n){Object(j.a)(t,n);var e=Object(f.a)(t);function t(){var n;Object(u.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))).state={error:null},n}return Object(b.a)(t,[{key:"componentDidCatch",value:function(n,e){console.error(n,e)}},{key:"render",value:function(){return this.state.error?Object(r.jsx)("p",{children:"Something went wrong on our end. Check the console or refresh the page."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(n){return{error:n}}}]),t}(o.Component),p=t(5),O=t(10),x="#fff",g="#000",v="#c64a01",m="#777",y="#444",k=function(n){return Object(O.a)(n,x)?x:g},w={contentBg:Object(O.b)(.2,g),contentBorder:m,headingText:k(g),cardBg:y,cardText:k(y),primary:v,primaryText:k(v),iconBtnHover:y,secondary:y,secondaryText:k(y),disabledBtn:m,disabledBtnText:k(m)},I=t(29),S=t(9);function B(){var n=Object(l.a)(["\n  transition: all 0.25s ease-in-out;\n  border: 1px solid ",";\n  border-radius: 5px;\n  background-color: ",";\n  padding: 10px 20px;\n  font-family: inherit;\n  font-size: 16px;\n  font-weight: 700;\n  color: ",";\n  cursor: pointer;\n  &:hover,\n  &:active,\n  &:focus {\n    background-color: ",";\n    color: ",";\n  }\n\n  &:disabled {\n    border-color: ",";\n    background-color: ",";\n    color: ",";\n    cursor: default;\n    pointer-events: none;\n    > * {\n      opacity: 0.7;\n    }\n  }\n\n  .svg-inline--fa {\n    margin-right: 5px;\n  }\n"]);return B=function(){return n},n}var C=p.a.button(B(),w.primaryText,(function(n){return"primary"===n.theme?w.primary:w.secondary}),(function(n){return"primary"===n.theme?w.primaryText:w.secondaryText}),(function(n){return"primary"===n.theme?w.primaryText:w.secondaryText}),(function(n){return"primary"===n.theme?w.primary:w.secondary}),w.disabledBtn,w.disabledBtn,w.disabledBtnText);var D=function(n){var e=n.faIcon,t=n.text,o=n.theme,a=void 0===o?"primary":o,i=n.disabled,c=void 0!==i&&i,s=Object(I.a)(n,["faIcon","text","theme","disabled"]);return Object(r.jsxs)(C,Object(d.a)(Object(d.a)({type:"button",theme:a,disabled:c},s),{},{children:[Object(r.jsx)(S.a,{icon:e,role:"presentation","aria-hidden":"true"}),Object(r.jsx)("span",{children:t})]}))},T=t(8);function A(){var n=Object(l.a)(["\n  transition: border-color .25s ease-in-out;\n  margin-right: 5px;\n  height: 30px;\n  border: 1px solid ",";\n  background-color: transparent;\n  padding: 5px 10px;\n  color: ",";\n\n  &:hover,\n  &:active,\n  &:focus {\n    border-color: ",";\n  }\n"]);return A=function(){return n},n}function L(){var n=Object(l.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n  padding: 20px 50px;\n  color: ",";\n"]);return L=function(){return n},n}var P=p.a.header(L(),w.contentBorder,w.contentBg,w.headingText),E=p.a.input(A(),w.contentBorder,w.headingText,w.headingText);var z=function(n){var e=n.username,t=n.onSubmitUser,a=Object(o.useState)(e),i=Object(s.a)(a,2),c=i[0],d=i[1];return Object(r.jsxs)(P,{children:[Object(r.jsx)("h1",{children:"Music Library"}),Object(r.jsxs)("form",{children:[Object(r.jsxs)("label",{children:[Object(r.jsx)("div",{children:"Choose a Discogs user"}),Object(r.jsx)(E,{type:"text",onChange:function(n){d(n.target.value)},value:c})]}),Object(r.jsx)(D,{type:"submit",onClick:function(n){return function(n){n.preventDefault(),t(c)}(n)},faIcon:T.a,text:"Load User",theme:"secondary",disabled:c===e})]})]})},M=t(27),N=t(11),H=t(13);function U(){var n=Object(l.a)(["\n  transition: background-color 0.25s ease-in-out;\n  max-width: 100%;\n  min-height: 150px;\n  overflow: hidden;\n  display: flex;\n  flex-wrap: wrap;\n  margin: 0;\n  padding-top: 10px;\n  padding-left: 10px;\n  padding-bottom: 0;\n  list-style-type: none;\n  background-color: ",";\n"]);return U=function(){return n},n}var F=p.a.ul(U(),(function(n){return n.isDraggingOver?Object(O.b)("0.7",w.primary):"transparent"}));var W=function(n){var e=n.id,t=n.direction,o=n.children;return Object(r.jsx)(H.c,{droppableId:e,direction:t||"vertical",children:function(n,e){return Object(r.jsxs)(F,Object(d.a)(Object(d.a)({ref:n.innerRef},n.droppableProps),{},{isDraggingOver:e.isDraggingOver,children:[o,n.placeholder]}))}})};function J(){var n=Object(l.a)(["\n  margin: 0;\n"]);return J=function(){return n},n}function R(){var n=Object(l.a)(["\n  margin-top: 0;\n  margin-bottom: 0;\n  font-size: 20px;\n  line-height: 1;\n"]);return R=function(){return n},n}function _(){var n=Object(l.a)(["\n  padding: 15px 10px;\n  border-bottom: 1px solid ",";\n"]);return _=function(){return n},n}function G(){var n=Object(l.a)(["\n  margin-bottom: 10px;\n  border: 1px solid ",";\n  border-radius: 5px;\n  background-color: ",";\n  padding-bottom: 10px;\n  color: ",";\n"]);return G=function(){return n},n}var K=p.a.div(G(),w.contentBorder,w.contentBg,w.headingText),Y=p.a.header(_(),w.contentBorder),q=p.a.h2(R()),Q=p.a.p(J());var V=function(n){var e=n.albumsLoadedCount,t=n.totalAlbumCount,o=n.albumElts;return Object(r.jsxs)(K,{children:[Object(r.jsxs)(Y,{children:[Object(r.jsx)(q,{children:"Unshelved Music"}),Object(r.jsxs)(Q,{children:["Loaded ",e," of ",t," albums"]})]}),Object(r.jsx)(W,{id:"unshelved",direction:"vertical",children:o})]})};function X(){var n=Object(l.a)(["\n  transition: background-color 0.25s ease-in-out;\n  border: none;\n  border-radius: 5px;\n  background-color: transparent;\n  padding: 0 20px;\n  color: inherit;\n  cursor: pointer;\n  &:hover,\n  &:active,\n  &:focus {\n    background-color: ",";\n  }\n"]);return X=function(){return n},n}function Z(){var n=Object(l.a)(["\n  transition: border-bottom 0.25s ease-in-out;\n  height: 40px;\n  border-top: none;\n  border-left: none;\n  border-right: none;\n  border-bottom: 1px solid transparent;\n  background-color: transparent;\n  font-size: 20px;\n  color: ",";\n  &:hover,\n  &:active,\n  &:focus {\n    outline: none;\n    border-bottom: 1px solid ",";\n  }\n"]);return Z=function(){return n},n}function $(){var n=Object(l.a)([""]);return $=function(){return n},n}function nn(){var n=Object(l.a)([""]);return nn=function(){return n},n}function en(){var n=Object(l.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: 1px solid ",";\n  padding: 10px;\n"]);return en=function(){return n},n}function tn(){var n=Object(l.a)(["\n  margin-bottom: 10px;\n  border: 1px solid ",";\n  border-radius: 5px;\n  background-color: ",";\n"]);return tn=function(){return n},n}var rn=p.a.li(tn(),w.contentBorder,w.contentBg),on=p.a.header(en(),w.contentBorder),an=p.a.h2(nn()),cn=p.a.div($()),dn=p.a.input(Z(),w.headingText,w.headingText),sn=p.a.button(X(),w.iconBtnHover);var ln=function(n){var e=n.id,t=n.onDeleteShelf,a=n.albumElts,i=Object(o.useState)("My New Shelf"),c=Object(s.a)(i,2),d=c[0],l=c[1];return Object(r.jsxs)(rn,{children:[Object(r.jsxs)(on,{children:[Object(r.jsxs)("label",{children:[Object(r.jsx)(an,{className:"sr-only",children:d}),Object(r.jsx)(dn,{type:"text",value:d,onChange:function(n){l(n.target.value)}})]}),Object(r.jsxs)(sn,{type:"button",onClick:function(){return t(e)},children:[Object(r.jsx)(S.a,{icon:T.h}),Object(r.jsx)("span",{className:"sr-only",children:"Delete Shelf"})]})]}),Object(r.jsx)(cn,{children:Object(r.jsx)(W,{id:e,direction:"horizontal",children:a})})]},e)};function un(){var n=Object(l.a)(["\n  display: inline;\n  &:nth-of-type(n + 2) {\n    &:before {\n      content: ', '\n    }\n  }\n"]);return un=function(){return n},n}function bn(){var n=Object(l.a)(["\n  display: inline;\n  margin-left: 0;\n  margin-bottom: 0.25em;\n  padding: 0;\n  list-style-type: none;\n"]);return bn=function(){return n},n}function jn(){var n=Object(l.a)(["\n  display: inline-block;\n  margin-top: 0;\n  margin-bottom: 0.25em;\n  margin-right: 0.5em;\n"]);return jn=function(){return n},n}function fn(){var n=Object(l.a)(["\n  justify-self: flex-end;\n  margin: 0;\n  padding-left: 5px;\n"]);return fn=function(){return n},n}function hn(){var n=Object(l.a)(["\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  margin-left: 0.5em;\n"]);return hn=function(){return n},n}function pn(){var n=Object(l.a)(["\n  flex: 1 1 auto;\n  display: flex;\n  max-width: 100%;\n  overflow: hidden;\n  margin-top: 0;\n  margin-bottom: 0.5em;\n  line-height: 1.2;\n  .fa-music {\n    transform: translateY(2px);\n  }\n"]);return pn=function(){return n},n}function On(){var n=Object(l.a)(["\n  display: flex;\n  align-items: flex-start;\n"]);return On=function(){return n},n}function xn(){var n=Object(l.a)(["\n  transition: box-shadow 0.25s ease-in-out;\n  position: relative;\n  overflow: hidden;\n  margin-right: 10px;\n  margin-bottom: 10px;\n  max-width: 100%;\n  width: 250px;\n  border-radius: 5px;\n  background-color: ",";\n  color: ",";\n  padding: 15px;\n  box-shadow: ",";\n\n  ","\n\n  &::before {\n    content: '';\n    transition: background-color 0.25s ease-in-out;\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    width: 5px;\n    background-color: ",";\n  }\n\n  &:hover,\n  &:active,\n  &:focus {\n    &::before {\n      background-color: ",";\n    }\n  }\n"]);return xn=function(){return n},n}var gn=p.a.li(xn(),w.cardBg,w.cardText,(function(n){return n.isDragging?"0 5px 10px ".concat(Object(O.b)(.5,"black")):"0 5px 10px transparent"}),(function(n){return n.isHorizontal?{display:"inline-block",verticalAlign:"top"}:null}),(function(n){return n.isDragging?w.primary:"transparent"}),w.primary),vn=p.a.div(On()),mn=p.a.h3(pn()),yn=p.a.span(hn()),kn=p.a.p(fn()),wn=p.a.h4(jn()),In=p.a.ul(bn()),Sn=p.a.li(un());var Bn=function(n){var e=n.info,t=n.index,o=n.isHorizontal,a=null===e||void 0===e?void 0:e.artists.map((function(n){return Object(r.jsx)(Sn,{children:n.name})})),i=null===e||void 0===e?void 0:e.formats.map((function(n){return Object(r.jsx)(Sn,{children:n.name})})),c=null===e||void 0===e?void 0:e.labels.map((function(n){return Object(r.jsx)(Sn,{children:n.name})}));return Object(r.jsx)(H.b,{draggableId:null===e||void 0===e?void 0:e.id.toString(),index:t,children:function(n,t){return Object(r.jsxs)(gn,Object(d.a)(Object(d.a)(Object(d.a)({ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{isHorizontal:o,isDragging:t.isDragging,children:[Object(r.jsxs)(vn,{as:"header",children:[Object(r.jsxs)(mn,{children:[Object(r.jsx)(S.a,{icon:T.e}),Object(r.jsx)(yn,{children:null===e||void 0===e?void 0:e.title})]}),Object(r.jsx)(kn,{children:(null===e||void 0===e?void 0:e.year)?null===e||void 0===e?void 0:e.year:"Unknown"})]}),Object(r.jsxs)(vn,{children:[Object(r.jsxs)(wn,{children:[Object(r.jsx)(S.a,{icon:T.d,fixedWidth:!0}),Object(r.jsx)("span",{className:"sr-only",children:"Artists"})]}),Object(r.jsx)(In,{children:a})]}),Object(r.jsxs)(vn,{children:[Object(r.jsxs)(wn,{children:[Object(r.jsx)(S.a,{icon:T.g,fixedWidth:!0}),Object(r.jsx)("span",{className:"sr-only",children:"Labels"})]}),Object(r.jsx)(In,{children:c})]}),Object(r.jsxs)(vn,{children:[Object(r.jsxs)(wn,{children:[Object(r.jsx)(S.a,{icon:T.b,fixedWidth:!0}),Object(r.jsx)("span",{className:"sr-only",children:"Formats"})]}),Object(r.jsx)(In,{children:i})]})]}),null===e||void 0===e?void 0:e.id)}},(null===e||void 0===e?void 0:e.id)||Math.random())};function Cn(){var n=Object(l.a)(["\n  max-width: 100%;\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n"]);return Cn=function(){return n},n}function Dn(){var n=Object(l.a)(["\n  width: calc(100% - 310px);\n  flex: 0 1 auto;\n  &:first-of-type {\n    flex: 0 1 310px;\n    padding-right: 30px;\n  }\n"]);return Dn=function(){return n},n}var Tn=p.a.section(Dn()),An=p.a.ul(Cn());var Ln=function(n){var e=n.allData,t=n.newPageData,a=n.onLoadPage,i=n.hasLoadedAllPages,c=n.totalAlbumCount,l=Object(o.useMemo)((function(){return{unshelved:{key:"unshelved",name:"Unshelved Music",orderedIds:[]},shelf1:{key:"shelf1",name:"My New Shelf",orderedIds:[]}}}),[]),u=Object(o.useState)(l),b=Object(s.a)(u,2),j=b[0],f=b[1],h=Object(o.useState)(2),p=Object(s.a)(h,2),O=p[0],x=p[1],g=Object(o.useCallback)((function(n){Object.keys(e).length?f((function(e){var t=e.unshelved.orderedIds.concat(n);return Object(d.a)(Object(d.a)({},e),{},{unshelved:Object(d.a)(Object(d.a)({},e.unshelved),{},{orderedIds:t})})})):f(l)}),[l,e]);Object(o.useEffect)((function(){var n=Object.keys(t).map((function(n){return n}));g(n)}),[t,g]);var v=function(n){window.confirm("Any albums on this shelf will be returned to the Unshelved column. Do you still want to delete this shelf?")&&f((function(e){var t=j[n].orderedIds,r=Object(d.a)({},e);delete r[n];var o=Object(M.a)(r.unshelved.orderedIds),a=t.concat(o);return Object(d.a)(Object(d.a)({},r),{},{unshelved:Object(d.a)(Object(d.a)({},r.unshelved),{},{orderedIds:a})})}))},m=Object(o.useCallback)((function(n){var t=n.columnId,o=n.isHorizontal,a=void 0!==o&&o;return j[t].orderedIds.map((function(n,t){return Object(r.jsx)(Bn,{index:t,info:e[n],horizontal:a},n)}))}),[e,j]);return Object(r.jsxs)(H.a,{onDragEnd:function(n){var e=n.draggableId,t=n.source,r=n.destination,o=t.droppableId,a=t.index,i=null===r||void 0===r?void 0:r.droppableId,c=null===r||void 0===r?void 0:r.index;if(r&&(o!==i||t.index!==r.index)){var s=Array.from(j[o].orderedIds);if(s.splice(a,1),o===i)s.splice(c,0,e),f(Object(d.a)(Object(d.a)({},j),{},Object(N.a)({},o,Object(d.a)(Object(d.a)({},j[o]),{},{orderedIds:s}))));else{var l,u=Array.from(j[i].orderedIds);u.splice(c,0,e),f(Object(d.a)(Object(d.a)({},j),{},(l={},Object(N.a)(l,o,Object(d.a)(Object(d.a)({},j[o]),{},{orderedIds:s})),Object(N.a)(l,i,Object(d.a)(Object(d.a)({},j[i]),{},{orderedIds:u})),l)))}}},children:[Object(r.jsxs)(Tn,{children:[Object(r.jsx)(V,{albumsLoadedCount:Object.keys(e).length,totalAlbumCount:c,albumElts:m({columnId:"unshelved"})}),Object(r.jsx)(D,{faIcon:T.c,text:"Load More Albums",onClick:a,disabled:i})]}),Object(r.jsxs)(Tn,{children:[1===Object.keys(j).length?Object(r.jsx)("p",{children:"Please add a shelf"}):Object(r.jsx)(An,{children:Object.keys(j).map((function(n){return"unshelved"!==n?Object(r.jsx)(ln,{id:n,onDeleteShelf:v,albumElts:m({columnId:n,isHorizontal:!0})},n):null}))}),Object(r.jsx)(D,{faIcon:T.f,text:"Add a Shelf",onClick:function(n){var e="shelf".concat(O);f((function(n){return Object(d.a)(Object(d.a)({},n),{},Object(N.a)({},e,{key:e,name:"My New Shelf",orderedIds:[]}))})),x((function(n){return n+1}))}})]})]})};function Pn(){var n=Object(l.a)(["\n  position: relative;\n  display: flex;\n  padding: 50px;\n"]);return Pn=function(){return n},n}function En(){var n=Object(l.a)(["\n  min-height: 100vh;\n  background-color: #333;\n  color: white;\n  &:before {\n    content: '';\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: \n      linear-gradient(to top, black, transparent), \n      url('https://loremflickr.com/g/1920/1200/music,record/all');\n    background-size: cover;\n    background-repeat: no-repeat;\n  }\n"]);return En=function(){return n},n}var zn=p.a.div(En()),Mn=p.a.main(Pn());var Nn=function(){var n=Object(o.useState)(null),e=Object(s.a)(n,2),t=e[0],a=e[1],i=Object(o.useState)(!1),c=Object(s.a)(i,2),l=c[0],u=c[1],b=Object(o.useState)(1),j=Object(s.a)(b,2),f=j[0],p=j[1],O=Object(o.useState)(0),x=Object(s.a)(O,2),g=x[0],v=x[1],m=Object(o.useState)(0),y=Object(s.a)(m,2),k=y[0],w=y[1],I=Object(o.useState)({}),S=Object(s.a)(I,2),B=S[0],C=S[1],D=Object(o.useState)({}),T=Object(s.a)(D,2),A=T[0],L=T[1],P=Object(o.useState)("blacklight"),E=Object(s.a)(P,2),M=E[0],N=E[1],H=Object(o.useCallback)((function(n){var e,t,r=function(n){var e={};return n.forEach((function(n){e[n.id]=n.basic_information})),e}(n.releases);v(null===(e=n.pagination)||void 0===e?void 0:e.pages),w(null===(t=n.pagination)||void 0===t?void 0:t.items),C(r),L((function(n){return Object(d.a)(Object(d.a)({},n),r)}))}),[]),U=function(){p(1),v(0),w(0),C({}),L({})};return Object(o.useEffect)((function(){u(!1),a(null),fetch("https://api.discogs.com/users/".concat(M,"/collection/folders/0/releases?page=").concat(f,"&per_page=20"),{method:"GET",headers:{"User-Agent":"MusicLibraryDemoApp/1.0"}}).then((function(n){if(n.ok)return n.json();throw 404===n.status?a("This username does not exist. Please try a different username."):a("Something went wrong."),new Error("Network response not OK")})).then((function(n){H(n),u(!0)})).catch((function(n){console.error(n)}))}),[M,f,H]),Object(r.jsxs)(zn,{children:[Object(r.jsx)(z,{username:M,onSubmitUser:function(n){N((function(e){return e!==n&&U(),n})),N(n)}}),Object(r.jsxs)(Mn,{children:[t&&Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:t})}),!l&&!t&&Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"Loading..."})}),l&&!t&&Object(r.jsx)(h,{children:Object(r.jsx)(Ln,{allData:A,newPageData:B,hasLoadedAllPages:f===g,onLoadPage:function(){return p((function(n){return n+1}))},totalAlbumCount:k})})]})]})},Hn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,46)).then((function(e){var t=e.getCLS,r=e.getFID,o=e.getFCP,a=e.getLCP,i=e.getTTFB;t(n),r(n),o(n),a(n),i(n)}))};c.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Nn,{})}),document.getElementById("root")),Hn()}},[[45,1,2]]]);
//# sourceMappingURL=main.dffc22e7.chunk.js.map